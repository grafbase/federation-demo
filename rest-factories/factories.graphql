extend schema
    @link(
        url: "https://specs.grafbase.com/composite-schemas/v1"
        import: ["@derive", "@key"]
    )
    @link(
        url: "https://grafbase.com/extensions/rest/0.5.0"
        import: ["@restEndpoint", "@rest"]
    )
    @restEndpoint(name: "factories-api", baseURL: "http://localhost:4001")

type Query {
    factories: [Factory!]!
        @rest(
            http: { GET: "/factories" }
            endpoint: "factories-api"
            selection: "."
        )
}

type Factory {
    lat: Float!
    lng: Float!
    productId: ID!
    product: Product! @derive
}

type Product @key(fields: "id") {
    id: ID!
}
